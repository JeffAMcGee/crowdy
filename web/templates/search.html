{% extends 'base.html' %}

{% block head_extra %}
<script src="http://static.simile.mit.edu/timeline/api-2.3.0/timeline-api.js?bundle=true" type="text/javascript"></script>

<script>


function loadData() {
    $(document).ready(function() {
        jQuery.getJSON('/api/1/search/crowd', data);
        $(window).resize(onResize());
    });
    var events = jQuery.map(data, function(crowd,i) {
        return {
            'start': new Date(1000*crowd.start),
            'end': new Date(1000*crowd.end),
            'users': crowd.users,
            'title': crowd.cid,
            'description': 'a crowd of '+crowd.size+' people'
        };
    });
            
    alert(events[0]['users']);

    var root=document.getElementById('dyTable');
    var tab=document.createElement('table');
    tab.className="mytable";
    var tbo=document.createElement('tbody');
    var row, cell;
    row=document.createElement('tr');
    cell=document.createElement('th');
    cell.appendChild(document.createTextNode('Period'));
    row.appendChild(cell);
    cell=document.createElement('th');
    cell.appendChild(document.createTextNode('Tweets'));
    row.appendChild(cell);
    cell=document.createElement('th');
    cell.appendChild(document.createTextNode('Users'));
    row.appendChild(cell);
    tbo.appendChild(row);
    for(var i=0;i<events.length;i++) {
        row=document.createElement('tr');
        for(var j=0;j<10;j++) {
            cell=document.createElement('td');
            switch(j)
            {
                case 0: 
                    var date1 = events[i]['start'];
                    var date2 = events[i]['end'];
                    cell.appendChild(document.createTextNode(date1.getFullYear()+'/'+date1.getMonth()+'/'+date1.getDate()+' '+date1.getHours()+':'+date1.getMinutes()+' To '+date2.getFullYear()+'/'+date2.getMonth()+'/'+date2.getDate()+' '+date2.getHours()+':'+date2.getMinutes())); 
                    break;
                case 1: cell.appendChild(document.createTextNode(events[i]['title'])); break;
                case 2: cell.appendChild(document.createTextNode(events[i]['description'])); break;
            }
            row.appendChild(cell);
        }
        tbo.appendChild(row);
    }
    tab.appendChild(tbo);
    root.appendChild(tab);
}




</script>


{% endblock %}



{% block content %}
    <br><br><br>
    <div id="search">
    <form action="/search" id="searchForm" method="get">
        <div id="searchEntry">
        <input autosave="com.twitter.search" id="searchBox" name="q" placeholder="Enter your query" results="10" type="search" value=""/>
        <div id="searchOptionsCtrl">
        <a href="/advanced_search" class="litnv">Advanced Search</a>
        </div>
        </div>
        <div id="searchButton">
        <input type=BUTTON value="Search" OnClick="location.href='list'"/>
        </div>
        <p class="clearer"></p>
    </form>
    </div>
    </br></br></br></br>
    <!--
    <div id="dyTable"></div>
    -->
    <!--
    <FORM>
    <TABLE BORDER CELLPADDING=0, width="100%">
    <TR>
    <TH><NOBR><INPUT NAME="search_query" SIZE=10, width="95%", cols=200></NOBR></TH>
    <TH><INPUT TYPE=BUTTON OnClick="search_result(this.form);" VALUE="Search", width="5%"></TH>
    </TR>
    </TABLE>
    <TABLE>
    <TR>
    <TH ALIGN=RIGHT BGCOLOR="#AACCFF">
    <NOBR>circumference: <INPUT NAME="Circle_circumference" SIZE=9></NOBR><BR>
    <NOBR>area: <INPUT NAME="Circle_area" SIZE=9></NOBR></TH>
    <TR>
    </TABLE>
    </FORM>
    -->
    
    <!--
    <div class = "option">
	<form id="form">
	        <label>Search</label>:
                <input id="" type="text" />
                <button OnClick=";">Submit</button>
		</br></br></br>
	</form>
    </div>
    -->
    <!--
    <fieldset>
    <legend> global view</legend>
	    <div class="timelineC">
		<div id = 'tl'></div>
	    </div>
    </fieldset>
    -->
{% endblock %}
